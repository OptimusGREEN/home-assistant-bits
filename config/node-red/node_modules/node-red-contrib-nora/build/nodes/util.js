"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function convertValueType(RED, value, type, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.defaultType, defaultType = _c === void 0 ? 'bool' : _c, _d = _b.defaultValue, defaultValue = _d === void 0 ? false : _d;
    if (type === 'flow' || type === 'global') {
        try {
            var parts = RED.util.normalisePropertyExpression(value);
            if (parts.length === 0) {
                throw new Error();
            }
        }
        catch (err) {
            value = defaultValue;
            type = defaultType;
        }
    }
    return { value: value, type: type };
}
exports.convertValueType = convertValueType;
function getValue(RED, node, value, type) {
    if (type === 'date') {
        return Date.now();
    }
    else {
        return RED.util.evaluateNodeProperty(value, type, node);
    }
}
exports.getValue = getValue;
